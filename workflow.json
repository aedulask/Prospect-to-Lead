{
  "workflow_name": "OutboundLeadGeneration",
  "description": "End-to-end AI agent workflow to find, contact, and qualify B2B leads for Analytos.ai",

  "api_keys": {
    "CLAY_API_KEY": "75dc32c8b43740ee6b84",
    "APOLLO_API_KEY": "XHwBmSDsdJYHcc3k-zvTxA",
    "CLEARBIT_KEY": "{{CLEARBIT_KEY}}",
    "OPENAI_KEY": "{{OPENAI_KEY}}",
    "SHEET_ID": "{{SHEET_ID}}"
  },
  "steps": [
    {
      "id": "prospect_search",
      "agent": "ProspectSearchAgent",
      "inputs": {
        "icp": {
          "industry": "SaaS",
          "location": "USA",
          "employee_count": { "min": 100, "max": 1000 },
          "revenue": { "min": 20000000, "max": 200000000 }
        },
        "signals": ["recent_funding", "hiring_for_sales"]
      },
      "instructions": "Use Clay and Apollo APIs to search for company and contact data matching the ICP. Return structured leads.",
      "tools": [
        {
          "name": "ClayAPI",
          "config": {
            "api_key": "{{CLAY_API_KEY}}",
            "endpoint": "https://api.clay.com/search"
          }
        },
        {
          "name": "ApolloAPI",
          "config": {
            "api_key": "{{APOLLO_API_KEY}}",
            "endpoint": "https://api.apollo.io/v1/mixed_search"
          }
        }
      ],
      "output_schema": {
        "leads": [
          {
            "company": "string",
            "contact_name": "string",
            "email": "string",
            "linkedin": "string",
            "signal": "string"
          }
        ]
      }
    },

    {
      "id": "enrichment",
      "agent": "DataEnrichmentAgent",
      "inputs": { "leads": "{{prospect_search.output.leads}}" },
      "instructions": "Enrich lead data using LinkedIn scraping or Clearbit API.",
      "tools": [
        {
          "name": "Clearbit",
          "config": { "api_key": "{{CLEARBIT_KEY}}" }
        }
      ],
      "output_schema": {
        "enriched_leads": [
          {
            "company": "string",
            "contact": "string",
            "role": "string",
            "technologies": "array"
          }
        ]
      }
    },

    {
      "id": "scoring",
      "agent": "ScoringAgent",
      "inputs": {
        "enriched_leads": "{{enrichment.output.enriched_leads}}",
        "scoring_criteria": "{{config.scoring}}"
      },
      "instructions": "Score leads based on configurable ICP scoring function.",
      "tools": [],
      "output_schema": { "ranked_leads": "array" }
    },

    {
      "id": "outreach_content",
      "agent": "OutreachContentAgent",
      "inputs": {
        "ranked_leads": "{{scoring.output.ranked_leads}}",
        "persona": "SDR",
        "tone": "friendly"
      },
      "instructions": "Generate personalized outreach messages using LLM and prospect context.",
      "tools": [
        {
          "name": "OpenAI",
          "config": { "api_key": "{{OPENAI_KEY}}" }
        }
      ],
      "output_schema": {
        "messages": [
          { "lead": "string", "email_body": "string" }
        ]
      }
    },

    {
      "id": "send",
      "agent": "OutreachExecutorAgent",
      "inputs": { "messages": "{{outreach_content.output.messages}}" },
      "instructions": "Send emails using SendGrid or Apollo API and log delivery.",
      "tools": [
        {
          "name": "ApolloAPI",
          "config": { "api_key": "{{APOLLO_API_KEY}}" }
        }
      ],
      "output_schema": { "sent_status": "array" }
    },

    {
      "id": "response_tracking",
      "agent": "ResponseTrackerAgent",
      "inputs": { "campaign_id": "{{send.output.campaign_id}}" },
      "instructions": "Monitor email responses and meeting bookings using Apollo API.",
      "tools": [
        {
          "name": "ApolloAPI",
          "config": { "api_key": "{{APOLLO_API_KEY}}" }
        }
      ],
      "output_schema": { "responses": "array" }
    },

    {
      "id": "feedback_trainer",
      "agent": "FeedbackTrainerAgent",
      "inputs": { "responses": "{{response_tracking.output.responses}}" },
      "instructions": "Analyze open/click/reply data, suggest new configurations (subject line change, ICP tweaks) and send for approval.",
      "tools": [
        {
          "name": "GoogleSheets",
          "config": { "sheet_id": "{{SHEET_ID}}" }
        }
      ],
      "output_schema": { "recommendations": "array" }
    }
  ]
}
